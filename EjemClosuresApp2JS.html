 <!DOCTYPE html>

<html>

<head>

<title>Ejemplo aprenderaprogramar.com</title><meta charset="utf-8">

<style type="text/css">

*{font-family: verdana, sans-serif;}

.nodoNuevo{background-color: black; color:white; width:100px;

text-align:center; padding:20px; font-size:32px; float:left;}

</style>

<script type="text/javascript">
    /*Necesitamos que setTimeout “recuerde” el valor que tenía i en cada pasada del bucle. 
    Esto lo podemos hacer creando un closure en cada pasada del bucle. Ejecuta este código:*/

function mostrarNumConRetardo() {

for(var i=1; i<11; i++){ setTimeout(function(x) { return function() { crearNodo(x); }; }(i), 1000*i); }

}

 

function crearNodo(numero) {

var nodoHijo = document.createElement("div");

nodoHijo.className="nodoNuevo"; nodoHijo.innerHTML = ''+numero;

document.body.appendChild(nodoHijo);

}
/* Dentro del setTimeout invocamos la siguiente función: 
function(x) { return function() { crearNodo(x); }; }(i)

Con esta sintaxis lo que hacemos es crear una función anónima que recibe un parámetro x y que devuelve otra 
función anónima interna que crea un closure ya que usa el parámetro que recibe la función externa. El 
closure recuerda el valor de la variable local (parámetro). Para ejecutar el closure, invocamos la función 
externa pasándole (i) como parámetro, siendo i el contador del bucle. Esto fuerza que setTimeout se ejecute
con los valores que tenía i en cada pasada del bucle, y no con una única referencia a i.*/

</script>

</script></head>

<body onload="mostrarNumConRetardo()" >

<div id="cabecera"><h2>Cursos aprenderaprogramar.com</h2><h3>Ejemplos JavaScript</h3></div>
</body></html>